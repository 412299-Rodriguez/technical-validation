<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
  <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
    <div>
      <label class="mb-1 block text-sm font-medium text-slate-700">Nombre completo</label>
      <input
        type="text"
        formControlName="fullName"
        placeholder="John Doe"
      class="w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
      />
    </div>

    <div>
      <label class="mb-1 block text-sm font-medium text-slate-700">Identificación</label>
      <input
        type="text"
        formControlName="identification"
        placeholder="12345678"
      class="w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
      />
    </div>

    <div>
      <label class="mb-1 block text-sm font-medium text-slate-700">Edad</label>
      <input
        type="number"
        formControlName="age"
        placeholder="30"
      class="w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
      />
    </div>

    <div>
      <label class="mb-1 block text-sm font-medium text-slate-700">Género</label>
      <select
        formControlName="gender"
      class="w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
        <option value="" disabled>Selecciona</option>
        <option value="MALE">Masculino</option>
        <option value="FEMALE">Femenino</option>
        <option value="OTHER">Otro</option>
      </select>
    </div>
  </div>

  <hr class="border-slate-200" />

  <div class="space-y-4">
    <label class="flex items-center justify-between text-sm font-medium text-slate-700">
      <span>Activo</span>
      <div class="flex items-center">
        <input type="checkbox" id="activeToggle" formControlName="active" class="peer sr-only" />
        <span
          class="flex h-6 w-11 items-center justify-start rounded-full bg-slate-200 px-1 transition-colors duration-200 peer-checked:bg-blue-600 peer-checked:justify-end">
          <span class="h-4 w-4 rounded-full bg-white shadow transition-transform duration-200"></span>
        </span>
      </div>
    </label>

    <label class="flex items-center justify-between text-sm font-medium text-slate-700">
      <span>¿Maneja?</span>
      <div class="flex items-center">
        <input type="checkbox" id="drivesToggle" formControlName="drives" class="peer sr-only" />
        <span
          class="flex h-6 w-11 items-center justify-start rounded-full bg-slate-200 px-1 transition-colors duration-200 peer-checked:bg-blue-600 peer-checked:justify-end">
          <span class="h-4 w-4 rounded-full bg-white shadow transition-transform duration-200"></span>
        </span>
      </div>
    </label>

    <label class="flex items-center justify-between text-sm font-medium text-slate-700">
      <span>¿Utiliza lentes?</span>
      <div class="flex items-center">
        <input type="checkbox" id="glassesToggle" formControlName="wearsGlasses" class="peer sr-only" />
        <span
          class="flex h-6 w-11 items-center justify-start rounded-full bg-slate-200 px-1 transition-colors duration-200 peer-checked:bg-blue-600 peer-checked:justify-end">
          <span class="h-4 w-4 rounded-full bg-white shadow transition-transform duration-200"></span>
        </span>
      </div>
    </label>

    <label class="flex items-center justify-between text-sm font-medium text-slate-700">
      <span>¿Es diabetico?</span>
      <div class="flex items-center">
        <input type="checkbox" id="diabeticToggle" formControlName="diabetic" class="peer sr-only" />
        <span
          class="flex h-6 w-11 items-center justify-start rounded-full bg-slate-200 px-1 transition-colors duration-200 peer-checked:bg-blue-600 peer-checked:justify-end">
          <span class="h-4 w-4 rounded-full bg-white shadow transition-transform duration-200"></span>
        </span>
      </div>
    </label>
  </div>

  <hr class="border-slate-200" />

  <div>
    <label class="mb-1 block text-sm font-medium text-slate-700">Otra enfermedad (opcional)</label>
    <textarea
      rows="3"
      formControlName="otherDisease"
      placeholder="Describe cualquier otra condición médica relevante..."
      class="w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></textarea>
  </div>

  <div class="flex items-center justify-between">
    <div>
      <p class="text-sm font-medium text-slate-700">Atributos adicionales (opcional)</p>
      <p class="text-xs text-slate-400">Ingrese atributos</p>
    </div>
    <button
      type="button"
      class="inline-flex items-center rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50"
      (click)="onAddAttribute()">
      <span class="mr-1 text-base">+</span>
      Agregar
    </button>
  </div>

  <div class="space-y-3" *ngIf="additionalAttributes.length > 0">
    <div
      class="grid grid-cols-[1fr_1fr_auto] items-center gap-3"
      *ngFor="let group of additionalAttributeGroups; index as i"
      [formGroup]="group">
      <input
        type="text"
        class="rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
        placeholder="Nombre del atributo"
        formControlName="key" />
      <input
        type="text"
        class="rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
        placeholder="Descripción breve"
        formControlName="value" />
      <button
        type="button"
        class="text-slate-400 transition hover:text-rose-500"
        aria-label="Remove attribute"
        (click)="removeAttribute(i)">
        ×
      </button>
    </div>
  </div>

  <div class="flex justify-end gap-2 border-t border-slate-200 pt-4">
    <button
      type="button"
      (click)="onCancel()"
      [disabled]="submitting"
      class="rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60">
      Cancelar
    </button>
    <button
      type="submit"
      [disabled]="submitting"
      class="rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60">
      {{ submitting ? 'Guardando...' : (mode === 'create' ? 'Crear cliente' : 'Guardar cambios') }}
    </button>
  </div>
</form>

